(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24990dd2"],{"1afd":function(t,e,n){},"1f5d":function(t,e,n){"use strict";var a=n("d941"),r=n("c3ae"),s=(n("13b6"),n("b772"),n("043a")),o=n("d887"),i=n("4360"),c=function(){var t=Object(r["a"])(Object(a["a"])().mark((function t(e){var n,r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new s["a"].web3.eth.Contract(o,e);case 2:return n=t.sent,t.prev=3,t.next=6,n.methods.symbol().call({});case 6:return r=t.sent,t.abrupt("return",s["a"].successResult(r));case 10:return t.prev=10,t.t0=t["catch"](3),t.abrupt("return",s["a"].failResult(t.t0));case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(r["a"])(Object(a["a"])().mark((function t(e,n){var r,c,u;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new s["a"].web3.eth.Contract(o,e);case 2:return r=t.sent,c=i["a"].state.myAccount,t.prev=4,t.next=7,r.methods.allowance(c,n).call({from:c});case 7:return u=t.sent,u=s["a"].fromWei(u),t.abrupt("return",s["a"].successResult(u));case 12:return t.prev=12,t.t0=t["catch"](4),t.abrupt("return",s["a"].failResult(t.t0));case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var t=Object(r["a"])(Object(a["a"])().mark((function t(e,n){var r,c,u,l,p,d=arguments;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:1e16,c=s["a"].toWei(r),t.next=4,new s["a"].web3.eth.Contract(o,e);case 4:return u=t.sent,l=i["a"].state.myAccount,t.prev=6,t.next=9,u.methods.approve(n.toString().toLowerCase(),c).send({from:l});case 9:return p=t.sent,t.abrupt("return",s["a"].successResult(p));case 13:return t.prev=13,t.t0=t["catch"](6),console.log(t.t0),t.abrupt("return",s["a"].failResult(t.t0));case 17:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e,n){return t.apply(this,arguments)}}(),p=function(){var t=Object(r["a"])(Object(a["a"])().mark((function t(e,n,r){var i,c,u;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].web3.eth.getAccounts();case 2:return i=t.sent,n=s["a"].toWei(n),console.log(e,n,r),t.next=7,new s["a"].web3.eth.Contract(o,r);case 7:return c=t.sent,t.prev=8,t.next=11,c.methods.transfer(e,n).send({from:i[0]});case 11:return u=t.sent,console.log(u),t.abrupt("return",s["a"].successResult(u));case 16:return t.prev=16,t.t0=t["catch"](8),console.log(t.t0),t.abrupt("return",s["a"].failResult(t.t0));case 20:case"end":return t.stop()}}),t,null,[[8,16]])})));return function(e,n,a){return t.apply(this,arguments)}}(),d=function(){var t=Object(r["a"])(Object(a["a"])().mark((function t(e,n){var r,c,u;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=i["a"].state.myAcount,t.next=3,new s["a"].web3.eth.Contract(o,e);case 3:return c=t.sent,t.prev=4,t.next=7,c.methods.balanceOf(n||r).call({});case 7:return u=t.sent,u=s["a"].fromWei(u),t.abrupt("return",s["a"].successResult(u));case 12:return t.prev=12,t.t0=t["catch"](4),t.abrupt("return",s["a"].failResult(t.t0));case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n){return t.apply(this,arguments)}}(),h={getSymbol:c,allowance:u,approve:l,transfer:p,balanceOf:d};e["a"]=h},"3e60":function(t,e,n){"use strict";var a=n("4e59"),r=n("4f60").find,s=n("6763"),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),a({target:"Array",proto:!0,forced:i},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},"551e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"warehourse-wrap"},[n("CommonHeader",{attrs:{title:(t.operationParams.tokenName||"")+(0==t.type?t.$t("warehourse.recharge"):t.$t("warehourse.withdrawB"))}}),n("div",{staticClass:"page-wrap"},[n("div",{staticClass:"operation-btns"},[n("div",{staticClass:"box"},[n("div",{staticClass:"btn",class:{active:0===t.type},on:{click:function(e){return t.toggleType(0)}}},[t._v(t._s(t.$t("warehourse.recharge")))])]),n("div",{staticClass:"box"},[n("div",{staticClass:"btn",class:{active:1===t.type},on:{click:function(e){return t.toggleType(1)}}},[t._v(t._s(t.$t("warehourse.withdrawB")))])])]),n("div",{staticClass:"form-wrap"},[n("div",{staticClass:"form-title"},[t._v(t._s(0==t.type?t.$t("warehourse.selectRecharge"):t.$t("warehourse.selectWithdraw")))]),n("div",{staticClass:"form-cell",on:{click:t.handleTokenSHow}},[n("div",{staticClass:"name"},[t._v(t._s(t.operationParams.tokenName))]),n("svg",{staticClass:"icon"},[n("use",{attrs:{href:"#arrow-down"}})])]),0==t.type||"SFO"==t.operationParams.tokenName?n("div",{staticClass:"form-title"},[t._v(t._s(0==t.type?t.$t("warehourse.inputRecharge"):t.$t("warehourse.inputWithdraw")))]):t._e(),n("div",{staticClass:"form-balance-box"},[n("div",{staticClass:"balance"},[t._v(t._s(0==t.type?"":t.operationParams.tokenName+" "+t.$t("warehourse.balance")+"："+t.operationAssets[t.operationParams.tokenName].amount))]),0==t.type||"SFO"==t.operationParams.tokenName?n("div",{staticClass:"balance"},[t._v(" "+t._s(0==t.type?t.$t("warehourse.rechargeAmount")+"："+t.operationBalance:t.$t("warehourse.withdrawAMount")+"："+("SFO"==t.operationParams.tokenName?t.operationAssets[t.operationParams.tokenName].activityAmount:t.operationAssets[t.operationParams.tokenName].amount))+" "),1==t.type?n("svg",{staticClass:"icon",on:{click:t.handleNoticeShow}},[n("use",{attrs:{href:"#tip-grey"}})]):t._e()]):t._e()]),0==t.type||"SFO"==t.operationParams.tokenName?n("VanField",{staticClass:"form-field",attrs:{type:"digit",readonly:t.loading,placeholder:0==t.type?t.$t("warehourse.inputRecharge"):t.$t("warehourse.inputWithdraw")},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}):t._e(),n("div",{staticClass:"form-btns"},[n("div",{staticClass:"border-box"},[n("div",{staticClass:"btn",on:{click:t.handleOperation}},[t.loading?n("VanLoading"):t._e(),t._v(" "+t._s(0==t.type?t.$t("warehourse.recharge"):t.$t("warehourse.withdrawB"))+" ")],1)]),n("div",{staticClass:"border-box"},[n("div",{staticClass:"btn back",on:{click:t.backRouter}},[t._v(t._s(t.$t("warehourse.goBack")))])]),1==t.type&&"SFO"==t.operationParams.tokenName?n("div",{staticClass:"tip"},[t._v(t._s(t.$t("warehourse.notice")))]):t._e()])],1)]),n("VanPopup",{staticClass:"token-popup",style:{height:"50%"},attrs:{round:"",position:"bottom"},model:{value:t.tokenShow,callback:function(e){t.tokenShow=e},expression:"tokenShow"}},[n("div",{staticClass:"token-list"},t._l(t.miningInfo.supportTokenList,(function(e,a){return n("div",{key:e.tokenType,staticClass:"token-item",on:{click:function(n){return t.handleToken(e)}}},[n("div",{staticClass:"label"},[n("img",{staticClass:"logo",attrs:{src:e.tokenLogo,alt:""}}),n("div",[t._v(t._s(e.tokenName))])]),n("div",{staticClass:"value"},[n("div",[t._v(t._s(t.getBalance(e.tokenName)))]),n("div",[t._v("≈$"+t._s(t.getU(e.tokenName)))])])])})),0)]),t.noticeShow?n("NoticePop",{on:{close:t.handleNoticeShow}}):t._e(),t.loadingShow?n("LoadingPop",{attrs:{needTimer:!1},scopedSlots:t._u([t.countShow?{key:"countdown",fn:function(){return[n("div",{staticClass:"countDown"},[n("vanCountDown",{attrs:{time:t.countDownTime,format:"ss"},on:{finish:t.countDownFinish}}),t._v(t._s(t.$t("common.second"))+" ")],1)]},proxy:!0}:null],null,!0)},[n("div",{staticClass:"countDown tips"},[t._v(" "+t._s(t.$t("warehourse.countDown"))+" ")])]):t._e()],1)},r=[],s=n("d941"),o=n("c3ae"),i=(n("9884"),n("67ad"),n("13b6"),n("aea3"),n("3e60"),n("0e27"),n("f4d8"),n("bd6a"),n("d354"),n("8b89"),n("f27b")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CommomPop",{staticStyle:{"max-width":"85%"},on:{close:t.handleNoticeShow}},[n("div",{staticClass:"notice-wrap"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("warehourse.formula")))]),n("div",{staticClass:"content"},[t._v(t._s(t.$t("warehourse.withdrawNotice")))]),n("div",{staticClass:"btn",on:{click:t.handleNoticeShow}},[t._v(t._s(t.$t("warehourse.Iknow")))])])])},u=[],l=n("a43d"),p=n("9598"),d=n("7736"),h={name:"",data:function(){return{}},computed:Object(l["a"])({},Object(d["c"])(["myInfo"])),methods:{handleNoticeShow:function(){this.$emit("close")}},mounted:function(){},components:{CommomPop:p["a"]}},m=h,f=(n("9f85"),n("cba8")),w=Object(f["a"])(m,c,u,!1,null,"ab7745b4",null),b=w.exports,v=n("a03d"),k=n("1f5d"),g=12,y={name:"",data:function(){return{loading:!1,miningInfo:{},myAssetsList:[],balanceLoading:!0,tokenInfo:{},type:0,tokenShow:!1,operationParams:{},amount:"",operationAssets:{},operationBalance:0,withdrawTimestampBlank:2,withdrawTimeBlank:0,noticeShow:!1,countDownTime:6e4,countShow:!1,loadingShow:!1}},inject:["reload"],computed:{},watch:{},methods:{getBalance:function(t){var e=this.myAssetsList.findIndex((function(e){return e.name===t}));return e>-1?this.$gbUtils.formatBalance(this.myAssetsList[e].amount):0},getU:function(t){var e=this.myAssetsList.findIndex((function(e){return e.name===t}));return e>-1?this.$gbUtils.formatBalance(this.myAssetsList[e].amount*(this.myAssetsList[e].price||(1===+this.miningInfo.assetsList[e].tokenType?.15:0))):0},getWalletBalance:function(t){var e=this;return Object(o["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.$web3.balanceOf(t);case 4:if(a=n.sent,a.success){n.next=7;break}return n.abrupt("return");case 7:return n.abrupt("return",a.result);case 8:case"end":return n.stop()}}),n)})))()},getMining:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.balanceLoading=!0,t.myBalance=0,e.next=4,Object(v["a"])();case 4:if(n=e.sent,console.log("handleMining------",n),n.success){e.next=8;break}return e.abrupt("return");case 8:return t.miningInfo=n.data,t.myAssetsList=n.data.assetsList,t.miningInfo.supportTokenList.forEach(function(){var e=Object(o["a"])(Object(s["a"])().mark((function e(n){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.loading=!1,a=t.myAssetsList.find((function(t){return t.tokenType==n.tokenType})),t.operationAssets[n.tokenName]={name:n.tokenName,amount:a?t.$gbUtils.formatBalance(a.amount||0):0,activityAmount:a?t.$gbUtils.formatBalance(a.activityAmount||0):0};case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(t.operationAssets),Object.keys(t.tokenInfo).length>0?t.operationParams=t.tokenInfo:t.operationParams=t.miningInfo.supportTokenList[0],e.next=15,t.getWalletBalance(t.operationParams.tokenAddress);case 15:t.operationBalance=e.sent,t.balanceLoading=!1;case 17:case"end":return e.stop()}}),e)})))()},handleTokenSHow:function(){this.loading||(this.tokenShow=!this.tokenShow)},handleNoticeShow:function(){this.noticeShow=!this.noticeShow},toggleType:function(t){this.type!=t&&(this.loading||(this.type=t,this.amount=""))},handleToken:function(t){var e=this;return Object(o["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t),e.handleTokenSHow(),e.amount="",e.operationParams=t,n.next=6,e.getWalletBalance(t.tokenAddress);case 6:e.operationBalance=n.sent;case 7:case"end":return n.stop()}}),n)})))()},backRouter:function(){window.history.length<=1?this.$router.replace("/"):this.$router.go(-1)},setTimer:function(){var t=this;this.timer=setInterval((function(){g-=1,g<=1&&(clearInterval(t.timer),t.timer=null)}),5e3)},countDownFinish:function(){this.countShow=!1,this.loadingShow=!1,this.$router.replace("/warehourse")},handleOperation:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var n,a,r,o,i,c;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading){e.next=37;break}if(0!=t.type&&"SFO"!=t.operationParams.tokenName||t.amount&&0!=t.amount){e.next=3;break}return e.abrupt("return",t.$toast("please input"));case 3:if(0!=t.type){e.next=13;break}return t.loading=!0,e.next=7,k["a"].transfer(t.miningInfo.rechargeAddress,t.amount,t.operationParams.tokenAddress);case 7:if(n=e.sent,t.loading=!1,n.success){e.next=11;break}return e.abrupt("return");case 11:e.next=32;break;case 13:if(a=(new Date).valueOf(),r=t.$gbUtils.getCookie("withdrawTimestamp")||a,t.withdrawTimeBlank=t.$gbUtils.calculateDiffTime(a,r,"second"),!(Number(a)>=Number(r))){e.next=20;break}t.$gbUtils.removeCookie("withdrawTimestamp"),e.next=22;break;case 20:return t.$toast(t.$t("warehourse.widthdrawMessage",{0:t.withdrawTimeBlank})),e.abrupt("return");case 22:return t.loading=!0,o=(new Date).valueOf(),t.$gbUtils.setCookie("withdrawTimestamp",o+6e4*t.withdrawTimestampBlank,1),i="0.0010".concat(("0"+t.operationParams.tokenType).slice(-2)),e.next=28,t.$web3.transfer(t.miningInfo.fromAddress,i,t.amount);case 28:if(c=e.sent,t.loading=!1,c.success){e.next=32;break}return e.abrupt("return");case 32:t.$toast("success"),t.$emit("changeLoadingIconType",1),t.countShow=!0,t.loadingShow=!0,t.setTimer();case 37:case"end":return e.stop()}}),e)})))()}},mounted:function(){console.warn(this.$route.params),Object.keys(this.$route.params).length>0&&(this.tokenInfo=this.$route.params.tokenInfo,this.type=this.$route.params.type),this.getMining()},components:{LoadingPop:i["a"],NoticePop:b}},x=y,C=(n("d1dd"),Object(f["a"])(x,a,r,!1,null,"10ed0d6a",null));e["default"]=C.exports},7694:function(t,e,n){"use strict";n("f884")},9598:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VanPopup",{staticStyle:{"box-sizing":"border-box",width:"93%","background-color":"transparent"},attrs:{round:""},on:{"click-overlay":t.closePop},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"wrap"},[n("div",{staticClass:"window"},[t.closeIcon?n("div",{staticClass:"icon-wrapper"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.closePop.apply(null,arguments)}}},[n("use",{attrs:{"xlink:href":"#close"}})])]):t._e(),t._t("default")],2)])])},r=[],s={name:"",props:{closeIcon:{type:Boolean,default:!0}},data:function(){return{show:!0}},methods:{closePop:function(){this.$emit("close")},handleConfirm:function(){this.$emit("close")}},mounted:function(){}},o=s,i=(n("7694"),n("cba8")),c=Object(i["a"])(o,a,r,!1,null,"464a00b7",null);e["a"]=c.exports},9884:function(t,e,n){"use strict";var a=n("4e59"),r=n("4f60").findIndex,s=n("6763"),o="findIndex",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),a({target:"Array",proto:!0,forced:i},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},"9f85":function(t,e,n){"use strict";n("cc97")},a03d:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}));var a=n("b775"),r=function(t){return Object(a["a"])("GET","/dapp/mining/index",t,!0,!0,1)},s=function(t){return Object(a["a"])("GET","/dapp/mining/list",t)}},cc97:function(t,e,n){},d1dd:function(t,e,n){"use strict";n("1afd")},f884:function(t,e,n){}}]);