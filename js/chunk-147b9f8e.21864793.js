(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-147b9f8e"],{"0871":function(t,e,a){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function i(t){if(Array.isArray(t))return n(t)}a.d(e,"a",(function(){return c}));a("9f90"),a("efe6"),a("13b6"),a("8c9d"),a("d8e0"),a("30d8"),a("cca2");function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}a("8b89"),a("67ad"),a("f4d8"),a("9c52");function r(t,e){if(t){if("string"===typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(t,e):void 0}}a("d3f5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||s(t)||r(t)||o()}},"0ba5":function(t,e,a){},"0d1c":function(t,e,a){var n=a("9bd5"),i=a("c4e9");t.exports=function(t,e,a,s){try{return s?e(n(a)[0],a[1]):e(a)}catch(r){i(t,"throw",r)}}},"18ea":function(t,e,a){},"1d2f":function(t,e,a){"use strict";a("579b")},4071:function(t,e,a){"use strict";a("18ea")},"4eb8":function(t,e,a){"use strict";var n=a("8a5a"),i=a("2712"),s=a("5acb"),r=a("0d1c"),o=a("8db6"),c=a("2950"),u=a("4551"),d=a("d560"),l=a("23e0"),p=a("8487"),f=Array;t.exports=function(t){var e=s(t),a=c(this),m=arguments.length,v=m>1?arguments[1]:void 0,h=void 0!==v;h&&(v=n(v,m>2?arguments[2]:void 0));var b,g,k,w,x,_,O=p(e),C=0;if(!O||this===f&&o(O))for(b=u(e),g=a?new this(b):f(b);b>C;C++)_=h?v(e[C],C):e[C],d(g,C,_);else for(w=l(e,O),x=w.next,g=a?new this:[];!(k=i(x,w)).done;C++)_=h?r(w,v,[k.value,C],!0):k.value,d(g,C,_);return g.length=C,g}},"579b":function(t,e,a){},"5c25":function(t,e,a){t.exports=a.p+"img/no-data.dd2cce4c.png"},7601:function(t,e,a){"use strict";a("0ba5")},"7e88":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"task-wrap"},[n("CommonHeader"),n("div",{staticClass:"page-wrap"},[n("div",{staticClass:"operation-btns"},[n("div",{staticClass:"box"},[n("div",{staticClass:"btn",class:{active:0===t.tabActive},on:{click:function(e){return t.handleTab(0)}}},[t._v(t._s(t.$t("admin.allTask")))])]),n("div",{staticClass:"box"},[n("div",{staticClass:"btn",class:{active:1===t.tabActive},on:{click:function(e){return t.handleTab(1)}}},[t._v(t._s(t.$t("admin.myTask")))])])]),t.taskList.length<=0?n("div",{staticClass:"no-data"},[n("img",{attrs:{src:a("5c25"),alt:""}}),n("div",[t._v(t._s(t.$t("admin.noTask")))])]):[n("VanList",{attrs:{finished:t.finished,"finished-text":"","loading-text":" ","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.taskList,(function(e,a){return n("TaskItem",{key:e.id,ref:"item"+e.id,refInFor:!0,attrs:{dataSource:e,type:t.tabActive}})})),1)]],2)],1)},i=[],s=a("d941"),r=a("0871"),o=a("c3ae"),c=(a("31a7"),a("cb78")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-item-wrap"},[a("div",{attrs:{id:"header"}},[a("div",{staticClass:"info"},[a("div",{staticClass:"avatar",attrs:{translate:"no"}},[a("img",{attrs:{src:t.dataSource.logo||t.defaultImg,alt:""}})]),a("div",{staticClass:"name",attrs:{translate:"no"}},[t._v(t._s(t.dataSource.author))])]),a("div",{staticClass:"arrow-box",on:{click:t.handleDetail}},[1==t.type?a("span",{staticClass:"status"},[0==t.dataSource.status?a("span",[t._v(t._s(t.$t("admin.reviewing")))]):t._e(),1==t.dataSource.status?a("span",{staticClass:"passed"},[t._v(t._s(t.$t("admin.reviewPass")))]):t._e(),2==t.dataSource.status?a("span",{staticClass:"failed"},[t._v(t._s(t.$t("admin.reviewFail")))]):t._e()]):t._e(),a("van-icon",{attrs:{name:"down"}})],1)]),a("div",{staticClass:"data-title"},[t._v(t._s(t.dataSource.title))]),a("div",{staticClass:"no-expand"},[a("div",{staticClass:"item"},[a("div",{staticClass:"value",attrs:{translate:"no"}},[t._v(" "+t._s(t.$gbUtils.formatBalance(t.dataSource.award))+t._s(t.tokenName)+" ")]),a("div",{staticClass:"name"},[t._v(t._s(t.$t("admin.reward")))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"value",attrs:{translate:"no"}},[t._v(" "+t._s(t.dataSource.completionsTimes)+"/"+t._s(t.dataSource.times)+" ")]),a("div",{staticClass:"name"},[t._v(t._s(t.$t("admin.schedule")))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"value",attrs:{translate:"no"}},[t._v(" "+t._s(t.getTime(t.validTime))+t._s(t.getUnit(t.validTime))+" ")]),a("div",{staticClass:"name"},[t._v(t._s(t.$t("admin.timeLeft")))])])])])},d=[],l=a("a43d"),p=(a("b474"),a("f4d8"),a("bd6a"),a("c415"),a("9844"),a("942f"),a("b772"),a("7736")),f={name:"TaskItem",props:["dataSource","type"],data:function(){return{tokenName:"",validTime:null,auditTime:null,taskInfo:{},defaultImg:a("cf05")}},computed:Object(l["a"])({},Object(p["c"])(["myInfo"])),methods:{handleDetail:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={taskInfo:t.dataSource,type:t.type},t.dataSource&&t.$router.push({name:"TaskDetail",params:a});case 2:case"end":return e.stop()}}),e)})))()},handleOpenLink:function(){window.open(this.dataSource.url,"_blank")},getTime:function(t){return+t>=86400?(+t/86400).toFixed(0):+t>=3600?(+t/3600).toFixed(0):+t>=60?(+t/60).toFixed(0):void 0},getUnit:function(t){return+t>=86400?this.$t("common.day"):+t>=3600?this.$t("common.hour"):+t>=60?this.$t("common.min"):this.$t("common.second")},handleCopy:function(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy")&&(document.execCommand("copy"),this.$toast("copied")),document.body.removeChild(e)}},mounted:function(){this.tokenName=JSON.parse(localStorage.getItem("tokenList"))[this.dataSource.tokenType];var t=this.dataSource.expirationTime.replace(new RegExp("-","gm"),"/");if(this.validTime=(new Date(t).getTime()-(new Date).getTime())/1e3,0===this.dataSource.userStatus){var e=this.dataSource.auditExpirationTime.replace(new RegExp("-","gm"),"/");this.auditTime=(new Date(e).getTime()-(new Date).getTime())/1e3}}},m=f,v=(a("1d2f"),a("cba8")),h=Object(v["a"])(m,u,d,!1,null,"229a7069",null),b=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VanPopup",{staticStyle:{"box-sizing":"border-box",width:"93%","max-width":"400px","background-color":"#1d1d1d",padding:"20px 30px","box-shadow":"0px 2px 4px 0px rgba(0, 0, 0, 1)","border-radius":"4px"},attrs:{round:""},on:{"click-overlay":t.closePop},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"upload-wrap"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("admin.finishTask")))]),a("div",{attrs:{id:"image-info"}},[a("div",{staticClass:"name"},[t._v(t._s(t.$t("admin.taskImg")))]),a("div",{staticClass:"set-image"},[a("van-uploader",{attrs:{"after-read":t.afterRead,"max-size":10485760},on:{oversize:t.onOversize},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},[a("div",{staticClass:"upload"},[a("van-icon",{attrs:{name:"plus",size:"25"}})],1)])],1)]),a("div",{attrs:{id:"text-info"}},[a("div",{staticClass:"name"},[t._v(t._s(t.$t("admin.taskFinishDes")))]),a("van-field",{staticClass:"textarea",attrs:{translate:"no",placeholder:t.$t("common.inputContent"),maxlength:"200",rows:"4",type:"textarea"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),a("div",{staticClass:"button",on:{click:t.handleConfirm}},[t._v(" "+t._s(t.$t("common.confirm"))+" ")])])])},k=[],w=a("f645"),x=a("a261"),_={name:"informationDetail",props:["taskId"],data:function(){return{show:!0,fileList:[],content:"",images:""}},methods:{closePop:function(){this.$emit("close")},onOversize:function(t){console.log(t),this.$toast(this.$t("common.10m"))},afterRead:function(t){var e=this;return Object(o["a"])(Object(s["a"])().mark((function a(){var n,i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=new FormData,n.append("file",t.file),a.next=4,Object(x["a"])(n);case 4:if(i=a.sent,i.success){a.next=8;break}return e.fileList=[],a.abrupt("return");case 8:e.images=w["a"].imgUrl+i.data.url;case 9:case"end":return a.stop()}}),a)})))()},handleConfirm:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.images&&t.content){e.next=2;break}return e.abrupt("return",t.$toast(t.$t("common.fill")));case 2:return e.next=4,Object(c["i"])({taskId:t.taskId,content:t.content,images:t.images});case 4:if(a=e.sent,console.log("resp",a),a.success){e.next=8;break}return e.abrupt("return");case 8:t.$toast("success"),t.$emit("success"),t.$parent.pageNumber=1,t.$parent.taskList=[],t.$parent.getList();case 13:case"end":return e.stop()}}),e)})))()}},mounted:function(){console.log(this.taskId)}},O=_,C=(a("7601"),Object(v["a"])(O,g,k,!1,null,"e6b4c32c",null)),S=C.exports,y={name:"Task",data:function(){return{tabActive:0,loading:!1,finished:!1,pageSize:10,pageNumber:1,total:0,taskList:[],uploadShow:!1,tempId:"",tempIndex:null}},methods:{handleTab:function(t){this.tabActive!=t&&(this.tabActive=t,this.finished=!1,this.pageNumber=1,this.taskList=[],0==this.tabActive?this.getList():this.getMyList())},onLoad:function(){this.pageNumber+=1,0==this.tabActive?this.getList():this.getMyList()},getList:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Object(c["e"])({orderByColumn:"id",isAsc:"desc",pageSize:t.pageSize,pageNum:t.pageNumber});case 3:if(a=e.sent,t.loading=!1,a.success){e.next=7;break}return e.abrupt("return");case 7:t.pageSize*t.pageNumber>=a.total&&(t.finished=!0),t.taskList=[].concat(Object(r["a"])(t.taskList),Object(r["a"])(a.rows));case 9:case"end":return e.stop()}}),e)})))()},getMyList:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["f"])({orderByColumn:"log.id",isAsc:"desc",pageSize:t.pageSize,pageNum:t.pageNumber});case 2:if(a=e.sent,t.loading=!1,a.success){e.next=6;break}return e.abrupt("return");case 6:t.pageSize*t.pageNumber>=a.total&&(t.finished=!0),t.taskList=[].concat(Object(r["a"])(t.taskList),Object(r["a"])(a.rows));case 8:case"end":return e.stop()}}),e)})))()},handleShowUpload:function(t){t&&(this.tempId=t.id),this.uploadShow=!this.uploadShow,console.log("this.uploadShow",this.uploadShow)},handleUploadSuccess:function(){this.$refs["item".concat(this.tempId)][0].taskInfo.submitQuantity+=1,this.uploadShow=!1}},mounted:function(){0==this.tabActive?this.getList():this.getMyList()},components:{TaskItem:b,TaskPop:S}},j=y,T=(a("4071"),Object(v["a"])(j,n,i,!1,null,"62028342",null));e["default"]=T.exports},"9c52":function(t,e,a){"use strict";a("f4d8");var n=a("4e59"),i=a("2712"),s=a("e824"),r=a("086e"),o=a("ca36"),c=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),u=TypeError,d=s(/./.test);n({target:"RegExp",proto:!0,forced:!c},{test:function(t){var e=this.exec;if(!r(e))return d(this,t);var a=i(e,this,t);if(null!==a&&!o(a))throw new u("RegExp exec method returned something other than an Object or null");return!!a}})},a261:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("b775"),i=function(t){return Object(n["a"])("POST","/dapp/oss/upload",t,!0,!0)}},cb78:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return o})),a.d(e,"h",(function(){return c})),a.d(e,"a",(function(){return u})),a.d(e,"g",(function(){return d})),a.d(e,"i",(function(){return l})),a.d(e,"d",(function(){return p}));var n=a("b775"),i=function(t){return Object(n["a"])("GET","/dapp/task/getTaskAdminIndex",t,!0,!0)},s=function(t){return Object(n["a"])("GET","/dapp/task/adminList",t)},r=function(t){return Object(n["a"])("GET","/dapp/task/list",t,!0,!0)},o=function(t){return Object(n["a"])("GET","/dapp/taskLog/list",t,!0,!0)},c=function(t){return Object(n["a"])("GET","/dapp/task/".concat(t),{},!0,!0,1)},u=function(t){return Object(n["a"])("POST","/dapp/task",t)},d=function(t){return Object(n["a"])("GET","/dapp/taskLog/pendingReview",t,!0,!0)},l=function(t){return Object(n["a"])("POST","/dapp/taskLog",t,!0,!0)},p=function(t){return Object(n["a"])("POST","/dapp/taskLog/audit",t,!0,!0)}},cca2:function(t,e,a){var n=a("4e59"),i=a("4eb8"),s=a("87ea"),r=!s((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:r},{from:i})},cf05:function(t,e,a){t.exports=a.p+"img/logo.094ab691.png"}}]);